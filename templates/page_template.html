<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>{{ product_name }} – Yield, Cost Per Page, Compatibility & Where to Buy</title>
  <meta name="description" content="See {{ product_name }} specs: page yield, cost-per-page, compatible printers, and trusted places to buy online. Updated {{ last_updated }}." />
  {% if canonical_url %}<link rel="canonical" href="{{ canonical_url }}"/>{% endif %}

  <!-- Open Graph -->
  <meta property="og:type" content="product" />
  <meta property="og:title" content="{{ product_name }} – Yield, CPP & Compatibility" />
  <meta property="og:description" content="Yield {{ page_yield }} pages • CPP {{ cpp_display }}{% if compatible_models %} • {{ compatible_models|length }} compatible printers{% endif %}." />
  {% if canonical_url %}<meta property="og:url" content="{{ canonical_url }}"/>{% endif %}
  {% if site_name %}<meta property="og:site_name" content="{{ site_name }}"/>{% endif %}
  <meta name="twitter:card" content="summary" />
  {% if not indexable %}<meta name="robots" content="noindex,follow"/>{% endif %}

  <!-- Minimal CSS; fast and readable -->
  <style>
    :root{
      --max:1100px; --pad:16px; --muted:#6b7280; --b:#e5e7eb; --bg:#fff; --accent:#111827; --accent-2:#0f172a;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial;line-height:1.55;color:#111827;background:#fff}
    .container{max-width:var(--max);margin:0 auto;padding:24px var(--pad)}
    nav.breadcrumbs{font-size:13px;color:var(--muted);margin-bottom:8px}
    nav.breadcrumbs a{color:inherit;text-decoration:none}
    h1{font-size:clamp(22px,4vw,30px);margin:6px 0 10px}
    .muted{color:var(--muted)}
    .grid{display:grid;grid-template-columns:1fr;gap:22px}
    @media(min-width:980px){.grid{grid-template-columns:1.6fr 1fr}.sticky{position:sticky;top:16px}}
    .card{border:1px solid var(--b);border-radius:12px;padding:16px;background:var(--bg)}
    .qabox{border:1px solid var(--b);border-radius:10px;padding:12px;background:#f9fafb;display:flex;flex-wrap:wrap;gap:10px}
    .qabox .pill{padding:6px 10px;border-radius:999px;border:1px solid var(--b);background:#fff;font-weight:600}
    .btn{display:inline-block;padding:12px 16px;border-radius:12px;border:1px solid var(--accent);text-decoration:none;color:#fff;background:var(--accent);font-weight:800}
    .btn:hover{background:var(--accent-2);border-color:var(--accent-2)}
    .btn.secondary{background:#fff;color:var(--accent)}
    .table{width:100%;border-collapse:collapse}
    .table th,.table td{padding:10px 8px;border-bottom:1px solid var(--b);text-align:left;vertical-align:top}
    .section h2{font-size:clamp(18px,3.5vw,22px);margin:4px 0 10px}
    ul.clean{padding-left:18px;margin:8px 0}
    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{border:1px solid var(--b);padding:6px 10px;border-radius:999px;background:#fff;font-size:14px}
    .disclosure{font-size:12px;color:var(--muted);margin-top:8px}

    /* Jump links */
    .jumplinks{display:flex;flex-wrap:wrap;gap:10px;margin:8px 0 14px}
    .jumplinks a{font-size:14px;border:1px solid var(--b);padding:6px 10px;border-radius:999px;text-decoration:none;color:#111827;background:#fff}
    .jumplinks a:hover{background:#f3f4f6}

    /* Ad slots with reserved height to reduce CLS */
    .ad{border:1px dashed var(--b);border-radius:10px;padding:12px;color:#6b7280;text-align:center}
    .ad.slot-leader{min-height:100px}     /* 728x90 / 320x100 */
    .ad.slot-rect{min-height:280px}       /* 300x250 / 336x280 */
    .ad.slot-sidebar{min-height:600px}    /* 160x600 / responsive */

    /* Mobile sticky CTA */
    .m-cta{position:fixed;left:50%;transform:translateX(-50%);bottom:12px;z-index:50;background:#fff;border:1px solid var(--b);box-shadow:0 6px 20px rgba(0,0,0,0.08);border-radius:14px;padding:10px 12px;display:flex;gap:10px;align-items:center}
    .m-cta .price{font-weight:800}
    @media(min-width:980px){.m-cta{display:none}}
  </style>

  <!-- JSON-LD Product (safe, simplified) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Product",
    "name":"{{ product_name }}",
    {% if model_number %}"sku":"{{ model_number }}",{% endif %}
    {% if brand %}"brand":{"@type":"Brand","name":"{{ brand }}"},{% endif %}
    "description":"Specs and compatibility for {{ product_name }}. Yield {{ page_yield }} pages. Cost per page {{ cpp_display }}.",
    {% if canonical_url %}"url":"{{ canonical_url }}",{% endif %}
    {% if price %}"offers":{"@type":"Offer","priceCurrency":"{{ price_currency or 'USD' }}","price":"{{ "%.2f"|format(price|float) }}"{% if affiliate_url %},"url":"{{ affiliate_url }}"{% endif %}},{% endif %}
    "additionalProperty":[
      {"@type":"PropertyValue","name":"Page yield","value":"{{ page_yield }}"},
      {"@type":"PropertyValue","name":"Cost per page","value":"{{ cpp_display }}"}
    ]
  }
  </script>

  {% if faqs and faqs|length > 0 %}
  <script type="application/ld+json">
  { "@context":"https://schema.org","@type":"FAQPage","mainEntity":[
    {% for qa in faqs %}
      {"@type":"Question","name":"{{ qa.q }}","acceptedAnswer":{"@type":"Answer","text":"{{ qa.a }}"}}{% if not loop.last %},{% endif %}
    {% endfor %}
  ]}
  </script>
  {% endif %}

  {% if breadcrumbs and breadcrumbs|length > 0 %}
  <script type="application/ld+json">
  { "@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[
    {% for bc in breadcrumbs %}
      {"@type":"ListItem","position":{{ loop.index }},"name":"{{ bc.name }}","item":"{{ bc.url }}"}{% if not loop.last %},{% endif %}
    {% endfor %}
  ]}
  </script>
  {% endif %}
</head>

<body>
  <div class="container">
    <nav class="breadcrumbs">
      {% if breadcrumbs %}{% for bc in breadcrumbs %}<a href="{{ bc.url }}">{{ bc.name }}</a>{% if not loop.last %} › {% endif %}{% endfor %}{% endif %}
    </nav>

    <header>
      <h1>{{ product_name }}</h1>
      <div class="muted">Model/SKU: {{ model_number }}{% if brand %} • Brand: {{ brand }}{% endif %}</div>
    </header>

    <!-- Jump links (helps users & sitelinks in SERP) -->
    <nav class="jumplinks">
      <a href="#specs">Specs</a>
      {% if compatible_models %}<a href="#compat">Compatible Printers</a>{% endif %}
      {% if faqs %}<a href="#faqs">FAQs</a>{% endif %}
      <a href="#buy">Buy</a>
    </nav>

    <!-- AD: Top Leaderboard (reserved height) -->
    <div class="ad slot-leader" aria-label="ad-top">
      {% raw %}<!-- paste ad code here later -->{% endraw %}Ad
    </div>

    <section class="grid">
      <!-- LEFT COLUMN -->
      <div class="col">
        <div class="card">
          <div class="qabox">
            {% if page_yield %}<div class="pill">Yield: {{ page_yield }} pages</div>{% endif %}
            <div class="pill">CPP: {{ cpp_display }}</div>
            {% if compatible_models %}<div class="pill">{{ compatible_models|length }} compatible printers</div>{% endif %}
            {% if last_updated %}<div class="pill">Updated {{ last_updated }}</div>{% endif %}
          </div>
          <ul class="clean" style="margin-top:10px">
            {% if page_yield %}<li>Approx. yield: {{ page_yield }} pages</li>{% endif %}
            <li>Cost per page: {{ cpp_display }}</li>
            {% if compatible_models %}<li>{{ compatible_models|length }} compatible printers</li>{% endif %}
          </ul>
        </div>

        <!-- AD: In-content (after summary) -->
        <div class="ad slot-rect" aria-label="ad-incontent-1">
          {% raw %}<!-- paste ad code here later -->{% endraw %}Ad
        </div>

        <div class="section" id="specs">
          <h2>Specs</h2>
          <table class="table">
            <tbody>
              <tr><th>Product</th><td>{{ product_name }}</td></tr>
              {% if model_number %}<tr><th>Model/SKU</th><td>{{ model_number }}</td></tr>{% endif %}
              {% if brand %}<tr><th>Brand</th><td>{{ brand }}</td></tr>{% endif %}
              {% if page_yield %}<tr><th>Page yield</th><td>{{ page_yield }} pages</td></tr>{% endif %}
              {% if price %}<tr><th>Typical price</th><td>{{ price_currency or 'USD' }} ${{ "%.2f"|format(price|float) }}</td></tr>{% endif %}
              <tr><th>Cost per page</th><td>{{ cpp_display }}</td></tr>
            </tbody>
          </table>
        </div>

        {% if compatible_models %}
        <div class="section" id="compat">
          <h2>Compatible Printers</h2>
          <div class="chips">
            {% for m in compatible_models %}<span class="chip">{{ m }}</span>{% endfor %}
          </div>
        </div>
        {% endif %}

        {% if faqs %}
        <div class="section" id="faqs">
          <h2>FAQs</h2>
          <ul class="clean">
            {% for qa in faqs %}
              <li><strong>{{ qa.q }}</strong><br/>{{ qa.a }}</li>
            {% endfor %}
          </ul>
        </div>
        {% endif %}

        <!-- AD: In-content bottom -->
        <div class="ad slot-rect" aria-label="ad-incontent-2">
          {% raw %}<!-- paste ad code here later -->{% endraw %}Ad
        </div>
      </div>

      <!-- RIGHT COLUMN (BUY BOX) -->
      <aside class="sticky" id="buy">
        <div class="card">
          <h2>Where to Buy</h2>

          {% set has_offers = (affiliate_offers is defined) and ((affiliate_offers|length) > 0) %}
          {% if has_offers %}
            <ul class="clean" style="margin:0">
              {% for offer in affiliate_offers %}
                <li style="margin-bottom:8px">
                  <a class="btn" href="{{ offer.url }}" rel="nofollow sponsored noopener" target="_blank">
                    Buy at {{ offer.merchant or 'Online' }} — {{ offer.currency or price_currency or 'USD' }} {{ "%.2f"|format((offer.price or 0)|float) }}
                  </a>
                </li>
              {% endfor %}
            </ul>
          {% elif affiliate_url %}
            <a class="btn" href="{{ affiliate_url }}" rel="nofollow sponsored noopener" target="_blank">Buy Now</a>
          {% else %}
            <p class="muted">Buying links will appear here.</p>
          {% endif %}

          <p class="disclosure">We may earn a commission when you buy through our links at no extra cost to you.</p>
        </div>

        <!-- AD: Sidebar sticky -->
        <div class="ad slot-sidebar" style="margin-top:12px" aria-label="ad-sidebar">
          {% raw %}<!-- paste ad code here later -->{% endraw %}Ad
        </div>
      </aside>
    </section>

    <!-- AD: Bottom anchor candidate (networks often inject automatically) -->
    <div class="ad slot-leader" style="margin-top:18px" aria-label="ad-bottom">
      {% raw %}<!-- paste ad code here later -->{% endraw %}Ad
    </div>

    <footer>
      <div>Last updated: {{ last_updated }}</div>
      <div>Content is for compatibility/info only. Yields follow ISO/IEC guidance; real-world results vary.</div>
    </footer>
  </div>

  <!-- Mobile sticky CTA (shows on small screens only) -->
  {% if affiliate_url or (affiliate_offers and (affiliate_offers|length)>0) %}
  <div class="m-cta">
    <a class="btn" href="#buy" style="padding:10px 14px">Buy</a>
    {% if price %}
      <span class="price">{{ price_currency or 'USD' }} {{ "%.2f"|format(price|float) }}</span>
    {% endif %}
    <span class="muted">CPP {{ cpp_display }}</span>
  </div>
  {% endif %}
</body>
</html>
